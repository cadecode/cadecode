<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java 日期与时间类 | CadeCode</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/meta/favicon.ico">
    <link rel="alternate" type="application/rss+xml" href="https://cadecode.info/ /rss.xml" title=" RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://cadecode.info/ /feed.atom" title=" Atom Feed">
    <link rel="alternate" type="application/json" href="https://cadecode.info/ /feed.json" title=" JSON Feed">
    <meta name="description" content="Java 中基本的 Date 类以及 Calendar 类在使用上有诸多弊端，如计算困难、线程安全问题等。Java8 time 包中提供了 LocalDate、LocalDateTime 等新时间 api，为开发者提供了方便的时间操作方法">
    <link rel="preload" href="/assets/css/1.styles.fc2ef69e.css" as="style"><link rel="preload" href="/assets/js/app.f090c6fa.js" as="script"><link rel="preload" href="/assets/js/16.3a0188a2.js" as="script"><link rel="prefetch" href="/assets/js/10.89af0a9b.js"><link rel="prefetch" href="/assets/js/11.02f9083c.js"><link rel="prefetch" href="/assets/js/12.251fc3f9.js"><link rel="prefetch" href="/assets/js/13.42bb7c81.js"><link rel="prefetch" href="/assets/js/14.62d5be11.js"><link rel="prefetch" href="/assets/js/15.892c92c8.js"><link rel="prefetch" href="/assets/js/17.2efe4132.js"><link rel="prefetch" href="/assets/js/18.173c115d.js"><link rel="prefetch" href="/assets/js/19.03dfd8f7.js"><link rel="prefetch" href="/assets/js/2.97208efe.js"><link rel="prefetch" href="/assets/js/20.030c5a59.js"><link rel="prefetch" href="/assets/js/21.07694793.js"><link rel="prefetch" href="/assets/js/22.e01966c1.js"><link rel="prefetch" href="/assets/js/23.34ac6a36.js"><link rel="prefetch" href="/assets/js/24.0d2ebfdf.js"><link rel="prefetch" href="/assets/js/25.b1e440c5.js"><link rel="prefetch" href="/assets/js/26.f1cdc267.js"><link rel="prefetch" href="/assets/js/27.30083c19.js"><link rel="prefetch" href="/assets/js/28.7a0b71b0.js"><link rel="prefetch" href="/assets/js/29.5466f138.js"><link rel="prefetch" href="/assets/js/3.20b74c66.js"><link rel="prefetch" href="/assets/js/30.a454ad56.js"><link rel="prefetch" href="/assets/js/31.0b525909.js"><link rel="prefetch" href="/assets/js/32.da70c8fe.js"><link rel="prefetch" href="/assets/js/33.a14d6197.js"><link rel="prefetch" href="/assets/js/34.06f01f08.js"><link rel="prefetch" href="/assets/js/35.08cf558b.js"><link rel="prefetch" href="/assets/js/36.7a188bb2.js"><link rel="prefetch" href="/assets/js/37.c7701102.js"><link rel="prefetch" href="/assets/js/38.01151a84.js"><link rel="prefetch" href="/assets/js/39.a634b0f7.js"><link rel="prefetch" href="/assets/js/4.3ae04e58.js"><link rel="prefetch" href="/assets/js/40.5daa7f23.js"><link rel="prefetch" href="/assets/js/41.c1864f3f.js"><link rel="prefetch" href="/assets/js/42.a397be76.js"><link rel="prefetch" href="/assets/js/43.a8655a0e.js"><link rel="prefetch" href="/assets/js/44.8b390ee4.js"><link rel="prefetch" href="/assets/js/45.de78e5e5.js"><link rel="prefetch" href="/assets/js/46.53c93afb.js"><link rel="prefetch" href="/assets/js/47.9b24f7b3.js"><link rel="prefetch" href="/assets/js/48.03927eb8.js"><link rel="prefetch" href="/assets/js/49.e08edab2.js"><link rel="prefetch" href="/assets/js/5.8478d9c8.js"><link rel="prefetch" href="/assets/js/50.10e9b605.js"><link rel="prefetch" href="/assets/js/6.1f9cc124.js"><link rel="prefetch" href="/assets/js/7.9925e482.js"><link rel="prefetch" href="/assets/js/8.4b4198a3.js"><link rel="prefetch" href="/assets/js/9.7e095b0d.js">
    <link rel="stylesheet" href="/assets/css/1.styles.fc2ef69e.css">
    <!--webpack externals css-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
</head>
<body>
<div id="app" data-server-rendered="true"><div class="global-container"><div class="head-container head-hide"><div class="head-content clearfix"><div class="head-logo"><a href="/"><img src="/meta/logo.png"> <!----></a></div> <div class="head-links"><div class="el-row"><div class="el-col el-col-24 el-col-xs-0 el-col-sm-24"><ul role="menubar" class="head-menu el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-home"></i>
                            Index
                        </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-search"></i>
                            Search
                        </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-info"></i>
                            About
                        </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-link"></i>
                            Links
                        </li></ul></div> <div class="el-col el-col-24 el-col-xs-24 el-col-sm-0"><ul role="menubar" class="head-menu el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" aria-haspopup="true" class="head-menu-sub el-submenu"><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">Menu<i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-s-home"></i>
                                Index
                            </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-search"></i>
                                Search
                            </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-info"></i>
                                About
                            </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-link"></i>
                                Links
                            </li></ul></div></li></ul></div></div></div></div></div> <div class="post-container component-content component-hide"><div class="post-title">Java 日期与时间类</div> <div class="post-tag"><a href="/search/Java"><i class="el-icon-paperclip"></i>
            Java
        </a></div> <div class="post-desc">Java 中基本的 Date 类以及 Calendar 类在使用上有诸多弊端，如计算困难、线程安全问题等。Java8 time 包中提供了 LocalDate、LocalDateTime 等新时间 api，为开发者提供了方便的时间操作方法</div> <div class="markdown-content J_markdownContent content__default"><h1 id="java-日期与时间类"><a href="#java-日期与时间类" class="header-anchor">#</a> Java 日期与时间类</h1> <h2 id="传统时间-api"><a href="#传统时间-api" class="header-anchor">#</a> 传统时间 API</h2> <h3 id="date-类"><a href="#date-类" class="header-anchor">#</a> Date 类</h3> <ol><li><p>Date 类在 Java 面世之初就存在于标准库中，但从 Java 1.1 开始，Date 类的所有方法都被弃用</p></li> <li><p>使用示例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 获取当前时间，toString: Wed Jan 01 00:00:00 CST 2020</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 对应的时间戳，long 类型</span>
<span class="token keyword">long</span> stamp <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div></li></ol> <h3 id="calendar-类"><a href="#calendar-类" class="header-anchor">#</a> Calendar 类</h3> <ol><li><p>Java 1.1 推荐使用 Calendar 类处理时间</p></li> <li><p>使用示例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 获取 Calendar 实例，默认当前时间</span>
<span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 setTime() 设置 Calendar 对象的时间</span>
calendar<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 getTime() 获取对应的 Date 对象</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过年/月/日/时/分/秒设置时间，month 由 0 开始</span>
calendar<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
calendar<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 set(int field, int value) 设置时间字段</span>
calendar<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MONTH<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 get(int field) 获取对应时间字段</span>
<span class="token keyword">int</span> month <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 after 和 before 方法比较 Calendar 对象的先后，返回布尔值</span>
<span class="token class-name">Calendar</span> oldCalendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oldCalendar<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> after <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>oldCalendar<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="存在的问题"><a href="#存在的问题" class="header-anchor">#</a> 存在的问题</h3> <ol><li><p>时间计算困难</p> <p>毫秒值与日期直接转换比较繁琐，通过毫秒值来计算时间差步骤较多</p></li> <li><p>线程安全问题</p> <p>SimpleDateFormat 类是线程不安全的，在多线程的情况下，全局共享一个SimpleDateFormat类中的Calendar对象可能会出现异常</p> <p>因为 SimpleDateFormat 类 format 方法执行时使用一个 Calendar 类型成员变量报错时间，该变量被多个线程共享时就会出问题</p></li></ol> <h2 id="java8-新时间-api"><a href="#java8-新时间-api" class="header-anchor">#</a> Java8 新时间 API</h2> <h3 id="time-包常用类"><a href="#time-包常用类" class="header-anchor">#</a> time 包常用类</h3> <ol><li><p>Instant 类</p> <p>Instant类对时间轴上的单一瞬时点建模，可以用于记录应用程序中的事件时间戳，之后学习的类型转换中，均可以使用Instant类作为中间类完成转换</p></li> <li><p>Duration 类</p> <p>Duration类表示秒或纳秒时间间隔，适合处理较短的时间，需要更高的精确性</p></li> <li><p>Period类</p> <p>Period类表示一段时间的年、月、日</p></li> <li><p>LocalDate 类</p> <p>LocalDate是一个不可变的日期时间对象，表示日期，通常被视为年-月-日</p></li> <li><p>LocalTime 类</p> <p>LocalTime是一个不可变的日期时间对象，代表一个时间，通常被看作是小时-秒，时间表示为纳秒精度</p></li> <li><p>LocalDateTime 类</p> <p>LocalDateTime类是一个不可变的日期时间对象，代表日期时间，通常被视为年-月-日-时-分-秒</p></li> <li><p>ZonedDateTime 类</p> <p>ZonedDateTime是具有时区的日期时间的不可变表示，此类存储所有日期和时间字段，精度为纳秒，时区为区域偏移量，用于处理模糊的本地日期时间</p></li></ol> <h3 id="now-方法"><a href="#now-方法" class="header-anchor">#</a> now 方法</h3> <ol><li><p>now 方法根据当前日期或时间创建实例</p></li> <li><p>使用示例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 使用 now 方法创建 Instant 的实例对象</span>
<span class="token class-name">Instant</span> instantNow <span class="token operator">=</span> <span class="token class-name">Instant</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 now 方法创建 LocalDate 的实例对象</span>
<span class="token class-name">LocalDate</span> localDateNow <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 now 方法创建 LocalTime 的实例对象</span>
<span class="token class-name">LocalTime</span> localTimeNow <span class="token operator">=</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 now 方法创建 LocalDateTime 的实例对象</span>
<span class="token class-name">LocalDateTime</span> localDateTimeNow <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用now方法创建 ZonedDateTime 的实例对象</span>
<span class="token class-name">ZonedDateTime</span> zonedDateTimeNow <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 祖鲁时间（格林尼治时间 GMT /国际标准时间 UTC）</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Instant:&quot;</span> <span class="token operator">+</span> instantNow<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 年-月-日 yy-MM-dd</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LocalDate:&quot;</span> <span class="token operator">+</span> localDateNow<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 时:分:秒 HH:mm:ss</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LocalTime:&quot;</span> <span class="token operator">+</span> localTimeNow<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 年-月-日T时:分:秒</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LocalDateTime:&quot;</span> <span class="token operator">+</span> localDateTimeNow<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 年-月-日T时:分:秒+08:00[Asia/Shanghai] 表示时区</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ZonedDateTime:&quot;</span> <span class="token operator">+</span> zonedDateTimeNow<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
    Instant:2020-11-26T08:12:23.426Z
    LocalDate:2020-11-26
    LocalTime:16:12:23.473
    LocalDateTime:2020-11-26T16:12:23.473
    ZonedDateTime:2020-11-26T16:12:23.473+08:00[Asia/Shanghai]
*/</span>
</code></pre></div></li> <li><p>time 包其他类也可以使用 now 方法更精准的获取某些信息</p> <ul><li><p>Year类（表示年）</p></li> <li><p>YearMonth类（表示年月）</p></li> <li><p>MonthDay类（表示月日）</p></li></ul></li></ol> <h3 id="of-方法"><a href="#of-方法" class="header-anchor">#</a> of 方法</h3> <ol><li><p>of 方法根据给定的参数生成对应的日期/时间对象</p></li> <li><p>使用示例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 2018 年 8 月 8 日</span>
<span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 8 点 8 分 8 秒，秒为 0 或省略则 toString 不显示</span>
<span class="token class-name">LocalTime</span> localTime <span class="token operator">=</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2018 年 8 月 8 日 8 点 8 分 8 秒</span>
<span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;localTime: &quot;</span> <span class="token operator">+</span> localTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;localDate: &quot;</span> <span class="token operator">+</span> localDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;localDateTime：&quot;</span> <span class="token operator">+</span> localDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
    localDate: 2018-08-08
    localTime: 08:08:08
    localDateTime：2018-08-08T08:08:08
*/</span>
</code></pre></div></li></ol> <h3 id="zoneid-时区类"><a href="#zoneid-时区类" class="header-anchor">#</a> ZoneId 时区类</h3> <ol><li><p>ZoneId 用于表示时区</p></li> <li><p>ZoneId.getAvailableZoneIds 返回一个 set<String>，里面包含了约 600 个时区，如 Asia/Shanghai</String></p></li> <li><p>ZoneId.of 传入表示时区的字符串返回时区对象</p></li> <li><p>ZonedDateTime 设置时区</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 获取 LocalDateTime</span>
<span class="token class-name">LocalDateTime</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// LocalDateTime atZone 返回 ZonedDateTime 对象</span>
<span class="token comment">// 设置该 LocalDateTime 对象时区为上海</span>
<span class="token class-name">ZonedDateTime</span> zonedDateTime <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">atZone</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zonedDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取时区为东京的对应时间</span>
<span class="token class-name">ZonedDateTime</span> tokyoDateTime <span class="token operator">=</span> zonedDateTime<span class="token punctuation">.</span><span class="token function">withZoneSameInstant</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Asia/Tokyo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>tokyoDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
	2020-11-26T16:54:31.692+08:00[Asia/Shanghai]
    2020-11-26T17:54:31.692+09:00[Asia/Tokyo]
*/</span>
</code></pre></div></li></ol> <h3 id="month-枚举类"><a href="#month-枚举类" class="header-anchor">#</a> Month 枚举类</h3> <ol><li><p>Month 月份枚举</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 使用 Month 枚举获得月份</span>
<span class="token class-name">LocalDateTime</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span>AUGUST<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意老版本 Calendar 月份是从 0  开始，LocalDate/LocalDateTime 月份都是是从 1 开始</p></li> <li><p>Month.of 方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Month</span> month <span class="token operator">=</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// DECEMBER</span>
</code></pre></div></li></ol> <h3 id="plus-和-minus-方法"><a href="#plus-和-minus-方法" class="header-anchor">#</a> plus 和 <strong>minus</strong> 方法</h3> <ol><li><p>LocalDate 的 plus 方法</p> <ul><li>LocalDate plusDay(long days) 增加天数</li> <li>LocalDate plusWeeks(long weeks) 增加周数</li> <li>LocallDate plusMonths(long months) 增加月数</li> <li>LocalDate plusYears(long years) 增加年数</li></ul></li> <li><p>LocalTime 的 plus 方法</p> <ul><li>LocalTime plusNanos(long nanos) 增加纳秒</li> <li>LocalTime plusSeconds(long seconds) 增加秒</li> <li>LocalTime plusMinutes(long minutes) 增加分钟</li> <li>LocalTime plusHours(long hours) 增加小时</li></ul></li> <li><p>plus(TemporalAmount amoutToadd)</p> <p>TemporalAmount 是一个接口，Period 是其实现类，代表一段时间</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1 年 2 个月 3 天</span>
<span class="token class-name">Period</span> p <span class="token operator">=</span> <span class="token class-name">Period</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在 localDateTime 基础上加上 p 表示的一段时间</span>
<span class="token class-name">LocalDateTime</span> dateTimeAfterPlus <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>plus(long amountToadd, TemporalUnit unit)</p> <p>TemporalUnit是一个接口，ChronoUnit 是其实现类，封装了许多时间段</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 加 1 天</span>
<span class="token class-name">LocalDateTime</span> localDateTime1 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span>DAYS<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 加 2 小时</span>
<span class="token class-name">LocalDateTime</span> localDateTime2 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span>HOURS<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="with-方法"><a href="#with-方法" class="header-anchor">#</a> with 方法</h3> <ol><li><p>with 方法可以直接对时间的某一项进行修改</p> <ul><li>LocalDateTime withNano(int i) 修改纳秒</li> <li>LocalDateTime withSecond(int i) 修改秒</li> <li>LocalDateTime withMinute(int i) 修改分支</li> <li>LocalDateTime withHour(int i) 修改小时</li> <li>LocalDateTime withDayOfMonth(int i) 修改日</li> <li>LocalDateTime withMonth(int i) 修改月</li> <li>LocalDateTime withYear(int i) 修改年</li></ul></li> <li><p>with(TemporalField field, long newValue)</p> <p>temporalField是一个接口，ChronoField 是其实现类，提供了许多日期字段的枚举</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改到 10 月</span>
<span class="token class-name">LocalDateTime</span> localDateTimeModified <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token function">withMonth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改到 10 月</span>
<span class="token class-name">LocalDateTime</span> localDateTimeModified <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span>MONTH_OF_YEAR<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>with(TemporalAdjuster adjuster)</p> <p>TemporalAdjuster 是一个函数式接口，可以自定义 TemporalAdjuster  实现类完成想要的修改</p> <p>TemporalAdjusters 封装了许多方法，返回 TemporalAdjuster 的实现</p> <p>TemporalAdjusters 的 next、previous 方法配合 DayOfWeek 枚举类，可以方便的获取下周或上周的某天</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 改为当月第一天</span>
<span class="token class-name">LocalDateTime</span> localDateTime1 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">TemporalAdjusters</span><span class="token punctuation">.</span><span class="token function">firstDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 改为下个月第一天</span>
<span class="token class-name">LocalDateTime</span> localDateTime2 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">TemporalAdjusters</span><span class="token punctuation">.</span><span class="token function">firstDayOfNextMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 自定义 TemporalAdjuster，改为当月倒数第二天</span>
<span class="token class-name">LocalDateTime</span> localDateTime3 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TemporalAdjuster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Temporal</span> <span class="token function">adjustInto</span><span class="token punctuation">(</span><span class="token class-name">Temporal</span> temporal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> temporal<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">,</span> temporal<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaximum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// next、previous 方法配合 DayOfWeek 枚举类，如：下一个周五</span>
<span class="token class-name">LocalDateTime</span> localDateTime4 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">TemporalAdjusters</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token class-name">DayOfWeek</span><span class="token punctuation">.</span>FRIDAY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="query-方法"><a href="#query-方法" class="header-anchor">#</a> query 方法</h3> <ol><li><p>LocalDate、LocalTime 有一个 query 方法，用来进行对日期的查询</p></li> <li><p>R  query(TemporalQuery query) 是一个泛型方法，返回的数据是传入的泛型类的类型</p></li> <li><p>TemporalQuery 是一个泛型接口，通过重写其 queryFrom(TemporalAccessor temporal) 方法，传入时间返回数据</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回是否过了当年的劳动节</span>
<span class="token keyword">boolean</span> isAfterLabour <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TemporalQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">queryFrom</span><span class="token punctuation">(</span><span class="token class-name">TemporalAccessor</span> temporal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">LocalDate</span> today <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LocalDate</span> labour <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> today<span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>labour<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="parse-和-format"><a href="#parse-和-format" class="header-anchor">#</a> parse 和 format</h3> <ol><li><p>parse 方法是 LocalDate、LocalDateTime 的静态方法，将字符串转为时间或日期对象</p></li> <li><p>format 是 LocalDate、LocalDateTime 的实例方法，用于格式化字符串</p></li> <li><p>DateTimeFormatter 类封装了常用的格式作为静态变量，也可使用 ofPattern 方法自定义格式</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// LocalDate.parse，默认解析 yyyy-MM-dd</span>
<span class="token class-name">LocalDate</span> parsedDate1 <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;2018-08-08&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// LocalDate.parse 指定格式</span>
<span class="token class-name">LocalDate</span> parsedDate2 <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;2018/11/1&quot;</span><span class="token punctuation">,</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy/M/d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// localDateTime 对象可以直接调用 format 方法进行格式化</span>
<span class="token comment">// 2018-08-08</span>
<span class="token class-name">String</span> s1 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span>ISO_DATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2018-08-08T08:08:08</span>
<span class="token class-name">String</span> s2 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span>ISO_DATE_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// DateTimeFormatter.ofPattern 自定义格式 -&gt; 2018.08.08</span>
<span class="token class-name">String</span> s3 <span class="token operator">=</span> localDateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy.MM.dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol></div> <div class="catalog-container" style="display:none;"><!----> <div class="catalog-open"><i class="el-icon-s-operation"></i></div></div> <div class="comment-container"><div class="comment-title"><i class="el-icon-s-comment"></i>
        Comment here, be cool~
    </div> <div class="J_comment"></div></div></div> <div class="foot-container"><div class="foot-links"><a href="https://cadecode.info/rss.xml" target="_blank">Rss</a> <a href="https://github.com/cadecode" target="_blank">
            Github
        </a><a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=eBsZHB0bFxwdOB4XABUZERRWGxcV" target="_blank">
            Email
        </a><a href="https://www.cnblogs.com/pgjett" target="_blank">
            Cnblogs
        </a></div> <div class="foot-meta"><p>Copyright © 2020 CadeCode</p> <p>
            Theme
            <a href="https://github.com/cadecode/vuepress-theme-2zh" target="_blank">2zh</a>
            powered by
            <a href="https://www.vuepress.cn/" target="_blank">VuePress</a></p> <p id="/post/_012-java-%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4%E7%B1%BB/" data-flag-title="Java 日期与时间类" class="leancloud_visitors">
            本页访问次数 <i class="leancloud-visitors-count">0</i></p></div></div> <div class="backtop-container" style="display:none;"><i class="el-icon-caret-top"></i></div> <div class="loading-container"><div class="loading-box"><span>Loading</span></div></div></div><div class="global-ui"></div></div>
<script src="/assets/js/app.f090c6fa.js" defer></script><script src="/assets/js/16.3a0188a2.js" defer></script>
<!--webpack externals-->
<script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@8.8.2/dist/mermaid.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript DOM 常用尺寸 | CadeCode</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/meta/favicon.ico">
    <link rel="alternate" type="application/rss+xml" href="https://cadecode.info/ /rss.xml" title=" RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://cadecode.info/ /feed.atom" title=" Atom Feed">
    <link rel="alternate" type="application/json" href="https://cadecode.info/ /feed.json" title=" JSON Feed">
    <meta name="description" content="JavaScript 操作 DOM 时经常会用到一些尺寸，本文介绍怪异模式和标准模式下的滚动条距离、窗口尺寸、文档尺寸、元素文档坐标的兼容性写法以及窗口滚动到指定位置的方法">
    <link rel="preload" href="/assets/css/1.styles.fc2ef69e.css" as="style"><link rel="preload" href="/assets/js/app.90dfa06d.js" as="script"><link rel="preload" href="/assets/js/34.9bf27cd0.js" as="script"><link rel="prefetch" href="/assets/js/10.89af0a9b.js"><link rel="prefetch" href="/assets/js/11.17298c72.js"><link rel="prefetch" href="/assets/js/12.45be4633.js"><link rel="prefetch" href="/assets/js/13.42bb7c81.js"><link rel="prefetch" href="/assets/js/14.d9707984.js"><link rel="prefetch" href="/assets/js/15.c743c53e.js"><link rel="prefetch" href="/assets/js/16.3a0188a2.js"><link rel="prefetch" href="/assets/js/17.2efe4132.js"><link rel="prefetch" href="/assets/js/18.261de853.js"><link rel="prefetch" href="/assets/js/19.03dfd8f7.js"><link rel="prefetch" href="/assets/js/2.97208efe.js"><link rel="prefetch" href="/assets/js/20.5570beef.js"><link rel="prefetch" href="/assets/js/21.85f4294c.js"><link rel="prefetch" href="/assets/js/22.205e67f4.js"><link rel="prefetch" href="/assets/js/23.2b730934.js"><link rel="prefetch" href="/assets/js/24.9c08e873.js"><link rel="prefetch" href="/assets/js/25.5742440e.js"><link rel="prefetch" href="/assets/js/26.fbf76d39.js"><link rel="prefetch" href="/assets/js/27.87c381a7.js"><link rel="prefetch" href="/assets/js/28.5e17a5e0.js"><link rel="prefetch" href="/assets/js/29.5901daa6.js"><link rel="prefetch" href="/assets/js/3.20b74c66.js"><link rel="prefetch" href="/assets/js/30.1a6fc197.js"><link rel="prefetch" href="/assets/js/31.339d2aac.js"><link rel="prefetch" href="/assets/js/32.d639acdc.js"><link rel="prefetch" href="/assets/js/33.4e3b2419.js"><link rel="prefetch" href="/assets/js/35.37f2ebf1.js"><link rel="prefetch" href="/assets/js/36.e515a384.js"><link rel="prefetch" href="/assets/js/37.c14c86ff.js"><link rel="prefetch" href="/assets/js/38.efa8a638.js"><link rel="prefetch" href="/assets/js/39.bb8aa3af.js"><link rel="prefetch" href="/assets/js/4.80e7d4c8.js"><link rel="prefetch" href="/assets/js/40.aa1a9fda.js"><link rel="prefetch" href="/assets/js/41.b7fc1920.js"><link rel="prefetch" href="/assets/js/42.ed011b9f.js"><link rel="prefetch" href="/assets/js/43.e7355bd0.js"><link rel="prefetch" href="/assets/js/44.553c8e86.js"><link rel="prefetch" href="/assets/js/45.fb6d8adb.js"><link rel="prefetch" href="/assets/js/46.0c8308d6.js"><link rel="prefetch" href="/assets/js/47.0bbcdb01.js"><link rel="prefetch" href="/assets/js/48.d26d1327.js"><link rel="prefetch" href="/assets/js/49.fa24797a.js"><link rel="prefetch" href="/assets/js/5.ad7abc3e.js"><link rel="prefetch" href="/assets/js/50.e651e779.js"><link rel="prefetch" href="/assets/js/51.8a2e14a5.js"><link rel="prefetch" href="/assets/js/6.449eb973.js"><link rel="prefetch" href="/assets/js/7.8c111658.js"><link rel="prefetch" href="/assets/js/8.faf3cd99.js"><link rel="prefetch" href="/assets/js/9.7e095b0d.js">
    <link rel="stylesheet" href="/assets/css/1.styles.fc2ef69e.css">
    <!--webpack externals css-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
</head>
<body>
<div id="app" data-server-rendered="true"><div class="global-container"><div class="head-container head-hide"><div class="head-content clearfix"><div class="head-logo"><a href="/"><img src="/meta/logo.png"> <!----></a></div> <div class="head-links"><div class="el-row"><div class="el-col el-col-24 el-col-xs-0 el-col-sm-24"><ul role="menubar" class="head-menu el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-home"></i>
                            Index
                        </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-search"></i>
                            Search
                        </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-info"></i>
                            About
                        </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-link"></i>
                            Links
                        </li></ul></div> <div class="el-col el-col-24 el-col-xs-24 el-col-sm-0"><ul role="menubar" class="head-menu el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" aria-haspopup="true" class="head-menu-sub el-submenu"><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">Menu<i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-s-home"></i>
                                Index
                            </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-search"></i>
                                Search
                            </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-info"></i>
                                About
                            </li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;"><i class="el-icon-link"></i>
                                Links
                            </li></ul></div></li></ul></div></div></div></div></div> <div class="post-container component-content component-hide"><div class="post-title">JavaScript DOM 常用尺寸</div> <div class="post-tag"><a href="/search/JavaScript"><i class="el-icon-paperclip"></i>
            JavaScript
        </a></div> <div class="post-desc">JavaScript 操作 DOM 时经常会用到一些尺寸，本文介绍怪异模式和标准模式下的滚动条距离、窗口尺寸、文档尺寸、元素文档坐标的兼容性写法以及窗口滚动到指定位置的方法</div> <div class="markdown-content J_markdownContent content__default"><h1 id="javascript-dom-常用尺寸"><a href="#javascript-dom-常用尺寸" class="header-anchor">#</a> JavaScript DOM 常用尺寸</h1> <h2 id="怪异和标准模式"><a href="#怪异和标准模式" class="header-anchor">#</a> 怪异和标准模式</h2> <ol><li>浏览器在解析 CSS 时有怪异和标准两种模式，目的是为了向旧版本兼容</li> <li>标准模式下浏览器会按 w3c 规范解析代码</li> <li>怪异模式下按浏览器自身规范解析代码，一般会向后兼容 5 个版本</li> <li>首句使用 <code>&lt;!DOCTYPE html&gt;</code>，则使用 HTML5 规范，即标准模式，不加这句则使用怪异模式</li> <li>使用<code>document.compatMode</code> 返回 CSS1Compat 表示处于标准模式，返回 BackCompat 则为怪异模式</li></ol> <h2 id="滚动条滚动距离"><a href="#滚动条滚动距离" class="header-anchor">#</a> 滚动条滚动距离</h2> <ol><li><p>常见写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取滚动条和上侧/左侧的距离，即页面滚动距离</span>
window<span class="token punctuation">.</span>pageYOffset<span class="token operator">/</span>pageXOffset 
document<span class="token punctuation">.</span>bady<span class="token punctuation">.</span>scrollTop<span class="token operator">/</span>scrollLeft
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token operator">/</span>scrollLeft
window<span class="token punctuation">.</span>scrollY<span class="token operator">/</span>scollX
</code></pre></div></li> <li><p>兼容性表</p> <p>(b) 代表怪异模式，(s) 代表标准模式，C 代表 chrome，F 代表 firefox，O 代表 opera</p> <table><thead><tr><th style="text-align:center;">浏览器</th> <th style="text-align:center;">IE6789(b)</th> <th style="text-align:center;">IE678(s)</th> <th style="text-align:center;">IE9(s)</th> <th style="text-align:center;">C(bs)</th> <th style="text-align:center;">O/F(b)</th> <th style="text-align:center;">O/F(s)</th></tr></thead> <tbody><tr><td style="text-align:center;">documentElement</td> <td style="text-align:center;">0</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">可用</td></tr> <tr><td style="text-align:center;">body</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">pageOffset</td> <td style="text-align:center;">undefined</td> <td style="text-align:center;">undefined</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">可用</td></tr> <tr><td style="text-align:center;">scroll</td> <td style="text-align:center;">undefined</td> <td style="text-align:center;">undefined</td> <td style="text-align:center;">undefined</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">可用</td> <td style="text-align:center;">可用</td></tr></tbody></table></li> <li><p>兼容性写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getScrollOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>pageXOffset<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            top<span class="token operator">:</span> window<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">,</span>
            left<span class="token operator">:</span> window<span class="token punctuation">.</span>pageXOffset
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>
        top<span class="token operator">:</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">,</span>
        left<span class="token operator">:</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="窗口可视尺寸"><a href="#窗口可视尺寸" class="header-anchor">#</a> 窗口可视尺寸</h2> <ol><li><p>常见写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取窗口可视区域宽高</span>
window<span class="token punctuation">.</span>innerWidth<span class="token operator">/</span>innerHeight <span class="token comment">// 包括滚动条 兼容 IE9 及以上</span>
<span class="token comment">// window.outerWidrh/outerHeight 包含工具栏和滚动条，即浏览器窗口大小</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token operator">/</span>clientHeight <span class="token comment">// 不包括滚动条 兼容标准模式</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token operator">/</span>clientHeight <span class="token comment">// 包括滚动条 兼容怪异模式</span>
</code></pre></div></li> <li><p>兼容性写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getViewportSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                width<span class="token operator">:</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span>
                height<span class="token operator">:</span> window<span class="token punctuation">.</span>innerHeight
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>compatMode <span class="token operator">===</span> <span class="token string">'BackCompat'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    width<span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>
                    height<span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    width<span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>
                    height<span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="文档滚动尺寸"><a href="#文档滚动尺寸" class="header-anchor">#</a> 文档滚动尺寸</h2> <ol><li><p>常见写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取文档可滚动的总尺寸</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight<span class="token operator">/</span>scrollWidth
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight<span class="token operator">/</span>scrollWidth
<span class="token comment">// 优先使用 body.scrollHeight</span>
<span class="token comment">// documentElement.scrollHeight 在低版本 IE 存在问题</span>
</code></pre></div></li> <li><p>兼容性写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getScrollSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            width<span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollWidth<span class="token punctuation">,</span>
            height<span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>
        width<span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollWidth<span class="token punctuation">,</span>
        height<span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="元素文档坐标"><a href="#元素文档坐标" class="header-anchor">#</a> 元素文档坐标</h2> <ol><li><p>offsetParent</p> <p>元素无 fixed 定位时，offsetParent 为最近的非默认定位的父级元素，没有则返回 body</p> <p>元素有 fixed 定位时，offsetParent 返回 null</p> <p>body 的 offsetParent 为 null</p></li> <li><p>offsetTop/offsetLeft</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>offsetTop<span class="token operator">/</span>offsetLeft <span class="token comment">// 相对 offsetParent 元素的偏移</span>
</code></pre></div></li> <li><p>获取元素在文档中的坐标</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getElemPositionInDoc</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetParent<span class="token punctuation">,</span>
        top <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetTop<span class="token punctuation">,</span>
        left <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        top <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
        left <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
        parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        top<span class="token operator">:</span> top<span class="token punctuation">,</span>
        left<span class="token operator">:</span> left
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="窗口滚动"><a href="#窗口滚动" class="header-anchor">#</a> 窗口滚动</h2> <ol><li><p>常见写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 滚动到 (x, y) 坐标</span>
<span class="token comment">// window.scroll() 和 scrollTo() 功能相同</span>
window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   top<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
   behavior<span class="token operator">:</span> <span class="token string">'smooth'</span> <span class="token comment">// 平滑滚动</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>滚动到低部判断方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>innerHeight <span class="token operator">+</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">&gt;=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight
<span class="token comment">// 窗口可视高度 + 垂直滚动条滚动距离 &gt;= 文档滚动高度</span>
<span class="token comment">// 注意写兼容性</span>
</code></pre></div></li></ol></div> <div class="catalog-container" style="display:none;"><!----> <div class="catalog-open"><i class="el-icon-s-operation"></i></div></div> <div class="comment-container"><div class="comment-title"><i class="el-icon-s-comment"></i>
        Comment here, be cool~
    </div> <div class="J_comment"></div></div></div> <div class="foot-container"><div class="foot-links"><a href="https://cadecode.info/rss.xml" target="_blank">Rss</a> <a href="https://github.com/cadecode" target="_blank">
            Github
        </a><a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=eBsZHB0bFxwdOB4XABUZERRWGxcV" target="_blank">
            Email
        </a><a href="https://www.cnblogs.com/pgjett" target="_blank">
            Cnblogs
        </a></div> <div class="foot-meta"><p>Copyright © 2020 CadeCode</p> <p>
            Theme
            <a href="https://github.com/cadecode/vuepress-theme-2zh" target="_blank">2zh</a>
            powered by
            <a href="https://www.vuepress.cn/" target="_blank">VuePress</a></p> <p id="/post/_312-javascript-dom-%E5%B8%B8%E7%94%A8%E5%B0%BA%E5%AF%B8/" data-flag-title="JavaScript DOM 常用尺寸" class="leancloud_visitors">
            本页访问次数 <i class="leancloud-visitors-count">0</i></p></div></div> <div class="backtop-container" style="display:none;"><i class="el-icon-caret-top"></i></div> <div class="loading-container"><div class="loading-box"><span>Loading</span></div></div></div><div class="global-ui"></div></div>
<script src="/assets/js/app.90dfa06d.js" defer></script><script src="/assets/js/34.9bf27cd0.js" defer></script>
<!--webpack externals-->
<script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@8.8.2/dist/mermaid.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
</body>
</html>